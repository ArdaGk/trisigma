<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" /> <title>doc.md</title> </head> <body> <main> <section id="trisigma-scripting-api"> <h2>trisigma Scripting API</h2> <section id="contents"> <h3>Contents</h3> <ol class="arabic simple"> <li><p>Base Class</p></li> <li><p>Components</p></li> <li><p>Built-in methods</p></li> <li><p>Backtesting</p></li> <li><p>Go Live</p></li> <li><p>Strategy Optimizer</p></li> </ol> </section> </section> <section id="base-class"> <h2>Base Class</h2> <section id="class-trisigma-algorithm"> <h3>class <span class="docutils literal">trisigma.Algorithm</span></h3> <p>Base class for every algorithm. Includes the necessary built-in functions.</p> <section id="class-trisigma-algorithm-broker"> <h4>class <span class="docutils literal">trisigma.Algorithm.broker</span></h4> <p>Includes functions for, market data, account data, and actions (buy/sell)</p> </section> <section id="string-trisigma-algorithm-alg-stat"> <h4>string <span class="docutils literal">trisigma.Algorithm.alg_stat</span></h4> <p>Returns the state: 'init' for initialized, and &quot;running&quot; if running.</p> </section> <section id="string-trisigma-algorithm-config-data"> <h4>string <span class="docutils literal">trisigma.Algorithm.config_data</span></h4> <p>Includes instrument-specific parameters that are passed in the conf file</p> </section> <section id="trisigma-algorithm-register-func-trigger-args"> <h4><span class="docutils literal">trisigma.Algorithm.register(func, trigger, <span class="pre">args=[])</span></span></h4> <p>Used to make certain functions triggered when a condition returns True.</p> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 23)</p> <p>Non-consecutive header level increase; H3 to H5 [myst.header]</p> </aside> <section id="example-1"> <h5>Example 1</h5> <pre class="code python literal-block"><code><span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sell_loss</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">trail</span><span class="o">.</span><span class="n">on_hit</span><span class="p">)</span> <span class="c1">#Call the custom method 'self.sell_loss' whenever self.trail.on_hit returns True. </span> <span class="c1">#(self.trail.on_hit is a method from Trailling_Loss that returns True whenever price is below the trail)</span></code></pre> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 29)</p> <p>Non-consecutive header level increase; H3 to H5 [myst.header]</p> </aside> </section> <section id="example-2"> <h5>Example 2</h5> <pre class="code python literal-block"><code><span class="bp">self</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">new_traces</span><span class="p">,</span> <span class="n">Alarm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="p">,</span> <span class="s1">'1w'</span><span class="p">))</span> <span class="c1">#Call the custom method 'self.new_traces' Alarm(self.broker, '1w')() returns True.</span> <span class="c1">#In this case &quot;Alarm()&quot; is a callable object that returns True on every new interval.</span></code></pre> </section> </section> <section id="trisigma-algorithm-bind-alg-trisigma-algorithm"> <h4><span class="docutils literal">trisigma.Algorithm.bind(alg)</span> --&gt; trisigma.Algorithm</h4> <p>Creates a child algo that can be accessed within the current algo</p> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 37)</p> <p>Non-consecutive header level increase; H3 to H5 [myst.header]</p> </aside> <section id="example-2-1"> <h5>Example 2</h5> <pre class="code python literal-block"><code><span class="bp">self</span><span class="o">.</span><span class="n">child_algo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">ChildAlgo</span><span class="p">)</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_algo</span><span class="p">()</span> <span class="c1">#Each Algorithym is a callable object. Calling it will trigger its &quot;update&quot; function</span></code></pre> </section> </section> </section> </section> <section id="built-in-methods"> <h2>Built-in Methods</h2> <p>These methods will be called by the base class only if they exist in the code.</p> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 47)</p> <p>Non-consecutive header level increase; H1 to H3 [myst.header]</p> </aside> <section id="start"> <h3><span class="docutils literal">start ()</span></h3> <p>Triggered for only once when the bot has started. This is where new methods should be added to the <span class="docutils literal">self.event_handler</span></p> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 50)</p> <p>Non-consecutive header level increase; H1 to H3 [myst.header]</p> </aside> </section> <section id="update"> <h3><span class="docutils literal">update ()</span></h3> <p>Triggered whenever the price changes</p> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 53)</p> <p>Non-consecutive header level increase; H1 to H3 [myst.header]</p> </aside> </section> <section id="late-update"> <h3><span class="docutils literal">late_update ()</span></h3> <p>The very last method that will be called whenever the price changes. Can be used to execute the signals that were retuned during the <span class="docutils literal">update()</span>.</p> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 56)</p> <p>Non-consecutive header level increase; H1 to H3 [myst.header]</p> </aside> </section> <section id="end"> <h3><span class="docutils literal">end ()</span></h3> <p>Will be triggered whenever the bot has been interrupted or shut down.</p> </section> </section> <section id="components"> <h2>Components</h2> <section id="class-broker"> <h3><em>class</em> <span class="docutils literal">Broker</span></h3> <p>Includes functions for, market data, account data, and actions (buy/sell). It is the only component that is built-in in the base class (self.broker), so no need to recreate.</p> <section id="variables"> <h4>Variables</h4> <p>Variables below are 'GET' only. They are auutomatically set and updated by the engine while the algorithm is running.</p> </section> <section id="string-broker-symbol"> <h4><em>string</em> <span class="docutils literal">Broker.symbol</span></h4> <p>Returns the instrument of the strategy. This is set automatically by the engine when the algorithm is running.</p> </section> <section id="string-broker-quote-asset"> <h4><em>string</em> <span class="docutils literal">Broker.quote_asset</span></h4> <p>Returns the quote asset (default: USD)</p> </section> <section id="bool-broker-buy-filled"> <h4><em>bool</em> <span class="docutils literal">Broker.buy_filled</span></h4> <p>True, if an asset sold in that very current frame.</p> </section> <section id="bool-broker-sell-filled"> <h4><em>bool</em> <span class="docutils literal">Broker.sell_filled</span></h4> <p>True, if an asset sold in that very current frame.</p> </section> <section id="signals"> <h4>Signals</h4> </section> <section id="broker-buy-type-qty-limit-price-none"> <h4><span class="docutils literal">Broker.buy (_type, qty, limit_price = None)</span></h4> </section> <section id="broker-quote-buy-type-qty-quote-price-limit-price-none"> <h4><span class="docutils literal">Broker.quote_buy (_type, qty, quote_price, limit_price = None)</span></h4> <p>Buy by USD instead of quantity</p> </section> <section id="broker-sell-type-qty-limit-price-none"> <h4><span class="docutils literal">Broker.sell (_type, qty, limit_price = None)</span></h4> </section> <section id="broker-quote-sell-type-qty-quote-price-limit-price-none"> <h4><span class="docutils literal">Broker.quote_sell (_type, qty, quote_price, limit_price = None)</span></h4> <p>Sell by USD instead of quantity</p> </section> <section id="broker-cancel-side-index"> <h4><span class="docutils literal">Broker.cancel (side, index)</span></h4> <p>Cancels a particular open order by its index</p> </section> <section id="broker-cancel-all-side"> <h4><span class="docutils literal">Broker.cancel_all (side)</span></h4> <p>Cancels every (BUY or SELL) order</p> </section> <section id="account-data"> <h4>Account Data</h4> </section> <section id="broker-get-open-orders-dict"> <h4><span class="docutils literal">Broker.get_open_orders ()</span> --&gt; dict</h4> <p>Returns a dict with two keys: BUY and SELL. each containing a list of orders</p> </section> <section id="broker-get-position-dict"> <h4><span class="docutils literal">Broker.get_position ()</span> --&gt; dict</h4> <p>Returns a dict with three keys: &quot;FREE&quot;: spendable assets, &quot;LOCKED&quot;: assets that are waiting to be limit sold, &quot;FULL&quot;: FREE + LOCKED</p> </section> <section id="broker-get-balance-dict"> <h4><span class="docutils literal">Broker.get_balance ()</span> --&gt; dict</h4> <p>Returns a dict with three keys: &quot;FREE&quot;: spendable quote asset, &quot;LOCKED&quot;: quote asset locked for limit buy, &quot;FULL&quot;: FREE + LOCKED</p> </section> <section id="market-data"> <h4>Market Data</h4> </section> <section id="broker-get-ohlc-interval-lookback-1-dict"> <h4><span class="docutils literal">Broker.get_ohlc (interval, lookback = 1)</span> --&gt; dict</h4> <p>Get the candlestick of the 'interval'. Includes open/high/sell/low</p> </section> <section id="broker-get-price-lookback-1-float"> <h4><span class="docutils literal">Broker.get_price (lookback = 1)</span> --&gt; float</h4> </section> <section id="broker-get-time-datetime"> <h4><span class="docutils literal">Broker.get_time ()</span> --&gt; datetime</h4> </section> <section id="broker-get-timestamp-float"> <h4><span class="docutils literal">Broker.get_timestamp () </span> --&gt; float</h4> </section> <section id="broker-get-bids-list"> <h4><span class="docutils literal">Broker.get_bids ()</span> --&gt; list</h4> </section> <section id="broker-get-asks-list"> <h4><span class="docutils literal">Broker.get_asks ()</span> --&gt; list</h4> </section> <section id="broker-get-buy-price-float"> <h4><span class="docutils literal">Broker.get_buy_price ()</span> --&gt; float</h4> <p>Returns the price we would pay if we were to do Market Buy</p> </section> <section id="broker-get-sell-price-float"> <h4><span class="docutils literal">Broker.get_sell_price ()</span> --&gt; float</h4> <p>Returns the price we would get if we were to do Market Sell</p> </section> </section> <section id="class-alarm"> <h3><em>class</em> Alarm</h3> <p>A component that can be used to trigger in the beginning of a certain interval</p> <section id="intervals"> <h4>Intervals</h4> <ul class="simple"> <li><p>1w</p></li> <li><p>1d</p></li> <li><p>1h</p></li> <li><p>30m</p></li> <li><p>15m</p></li> <li><p>1m</p></li> <li><p>1s</p></li> </ul> <p>Coefficients can be anything. (Ex: 43m would work just fine)</p> </section> <section id="alarm-init-broker-interval-delta-none"> <h4><span class="docutils literal">Alarm.__init__ (broker, interval, delta=None)</span></h4> <ul class="simple"> <li><p><em>Broker</em> broker: needs <span class="docutils literal">self.broker</span> in order to access the current time</p></li> <li><p><em>string</em> interval: one of those intervals. (Case sensitive)</p></li> <li><p><em>timedelta</em> delta: offset for the certain unit. Ex/ (self.broker, '1w', delta=timedelta(days=6)) indicates every week's Sunday (not Monday)</p></li> </ul> </section> <section id="alarm-call-bool"> <h4><span class="docutils literal">Alarm.__call__ () <span class="pre">--&gt;</span> bool</span></h4> <p>The <span class="docutils literal">Alarm</span>, as an object, must be called in every frame so it can process the current <span class="docutils literal">self.broker.get_time()</span> and return True/False. There is no need to do this manually. Adding the object into base class' event handler (<span class="docutils literal">self.event_handler.add</span>) will make the base class automatically call this object in every iteration.</p> </section> </section> <section id="class-trailling-loss"> <h3><em>class</em> Trailling_Loss</h3> <p>A certain percentage below the current price can be easily tracked via this class.</p> <section id="trailling-loss-init-broker-perc"> <h4><span class="docutils literal">Trailling_Loss.__init__ (broker, perc)</span></h4> <ul class="simple"> <li><p><em>Broker</em> broker: It also needs <span class="docutils literal">self.broker</span> in order to access the current price</p></li> <li><p><em>float</em> perc: How much below? Ex/ 0.975, for %2.5</p></li> </ul> </section> <section id="trailling-loss-call-bool"> <h4><span class="docutils literal">Trailling_Loss.__call__ () <span class="pre">--&gt;</span> bool</span></h4> <p>Just like <span class="docutils literal">Alarm</span>, the class, as an object, must be called in every iteration so it can update the trail. Except this time the Base class won't be able to do it manually (yet). Syntax for calling.</p> </section> <section id="trailling-loss-on-hit-bool"> <h4><span class="docutils literal">Trailling_Loss.on_hit ()</span> --&gt; <em>bool</em></h4> <p>Returns true if the price went below the trail.</p> </section> <section id="sample-usage"> <h4>Sample Usage</h4> <pre class="code python literal-block"><code><span class="k">class</span> <span class="nc">Alg_v1</span> <span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span> <span class="k">def</span> <span class="nf">start</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">trail</span> <span class="o">=</span> <span class="n">Trailling_Loss</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="p">,</span> <span class="mf">0.975</span><span class="p">)</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handler</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sell_all</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">trail</span><span class="o">.</span><span class="n">on_hit</span><span class="p">)</span> <span class="c1"># Call sell_all whenever price is below the trail.</span> <span class="k">def</span> <span class="nf">update</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">trail</span><span class="p">()</span> <span class="c1">#Must be called in every iteration, so it can update the trail based on new price. </span> <span class="k">def</span> <span class="nf">sell_all</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1">#Sell all</span></code></pre> </section> </section> <section id="class-traces"> <h3><em>class</em> Traces</h3> <section id="traces-init-broker"> <h4><span class="docutils literal">Traces.__init__ (broker)</span></h4> <ul class="simple"> <li><p><em>Broker</em> broker: again, needs self.broker in order to access certain market datas</p></li> </ul> </section> <section id="traces-call-broker"> <h4><span class="docutils literal">Traces.__call__ (broker)</span></h4> <p>Must also be called manually in every iteration so that it can update its variables.</p> </section> <section id="traces-set-traces-new-traces"> <h4><span class="docutils literal">Traces.set_traces (new_traces)</span></h4> <p>Updates the traces with the given</p> </section> <section id="traces-get-traces-dict"> <h4><span class="docutils literal">Traces.get_traces ()</span> --&gt; <em>dict</em></h4> <p>Returns the traces</p> </section> <section id="traces-get-region-int"> <h4><span class="docutils literal">Traces.get_region ()</span> --&gt; <em>int</em></h4> <p>Returns the region. format: [..., -2, -1, 0, 1, 2, ...] where 0 is the white region, positives top, negatives below.</p> </section> <section id="traces-is-inside-region-ohlc-bool"> <h4><span class="docutils literal">Traces.is_inside (region, ohlc)</span> --&gt; <em>bool</em></h4> <p>Returns true if the all of the given candles (&quot;ohlc&quot;) are inside the &quot;region&quot;</p> </section> <section id="traces-on-change-bool"> <h4><span class="docutils literal">Traces.on_change ()</span> --&gt; <em>bool</em></h4> <p>Returns true whenever the current price crosses a trace. Passing this to the event handler will automatically trigger the desired function when a trace is crossed.</p> </section> <section id="sample-usage-1"> <h4>Sample Usage</h4> <pre class="code python literal-block"><code><span class="k">class</span> <span class="nc">Alg_v1</span> <span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span> <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span> <span class="o">=</span> <span class="n">Traces</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">broker</span><span class="p">)</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="o">.</span><span class="n">set_traces</span><span class="p">(</span><span class="n">get_new_traces</span><span class="p">())</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handler</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sell_profit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="o">.</span><span class="n">on_change</span><span class="p">)</span> <span class="c1"># Call sell_profit whenever self.traces.on_change returns True</span> <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="p">()</span> <span class="c1">#Again must be called every iterations</span> <span class="k">def</span> <span class="nf">sell_profit</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">traces</span><span class="o">.</span><span class="n">region</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1">#Sell the positions</span> </code></pre> </section> </section> <section id="other-useful-modules-classes"> <h3>Other useful modules/classes</h3> <section id="class-trisigma-sock"> <h4><em>class</em> trisigma.Sock</h4> <p>A socket-based event handler. Triggers given function whenever desired message is sent from another socker host.</p> </section> <section id="class-trisigma-slack"> <h4><em>class</em> trisigma.Slack</h4> <p>Slack channel integration</p> </section> <section id="module-trisigma-sheets"> <h4><em>module</em> trisigma.sheets</h4> <p>Google sheets integration</p> </section> <section id="module-trisigma-cloud-storage"> <h4><em>module</em> trisigma.cloud_storage</h4> <p>Google Cloud Storage integration</p> </section> <section id="module-trisigma-yahoo"> <h4><em>module</em> trisigma.yahoo</h4> <p>Yahoo finance integration</p> </section> <section id="module-trisigma-filemanager"> <h4><em>module</em> trisigma.filemanager</h4> <p>Provides a platform-independent and easier way to interact with the disk.</p> </section> <section id="module-trisigma-pots"> <h4><em>module</em> trisigma.pots</h4> <p>Includes different ways of handling the capital.</p> </section> <section id="module-trisigma-evaluation-utils"> <h4><em>module</em> trisigma.evaluation_utils</h4> <p>Library to calculate different metrics like return and sharp ratio</p> </section> </section> </section> <section id="backtesting"> <h2>Backtesting</h2> <section id="syntax"> <h3>Syntax</h3> <pre class="code python literal-block"><code><span class="kn">from</span> <span class="nn">trisigma.backtesting</span> <span class="kn">import</span> <span class="n">Backtesting</span> <span class="kn">from</span> <span class="nn">my_alg</span> <span class="kn">import</span> <span class="n">Alg</span> <span class="n">conf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'alg'</span><span class="p">:</span> <span class="n">Alg</span><span class="p">,</span> <span class="s1">'intervals'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'5m'</span><span class="p">,</span> <span class="s1">'1w'</span><span class="p">,</span> <span class="s1">'15m'</span><span class="p">,</span> <span class="s1">'1h'</span><span class="p">],</span> <span class="s1">'freq'</span><span class="p">:</span> <span class="s1">'5m'</span><span class="p">,</span> <span class="s1">'balance'</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">'lookback'</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="s1">'delta'</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span> <span class="s1">'name'</span><span class="p">:</span> <span class="s2">&quot;link1y&quot;</span><span class="p">,</span> <span class="s1">'symbols'</span><span class="p">:</span> <span class="p">[{</span><span class="s1">'symbol'</span><span class="p">:</span> <span class="s1">'LINKUSDT'</span><span class="p">},</span> <span class="p">{</span><span class="s1">'symbol'</span><span class="p">:</span> <span class="s1">'ETHUSDT'</span><span class="p">}],</span> <span class="s1">'source'</span><span class="p">:</span> <span class="s1">'binance'</span> <span class="s1">'fm'</span><span class="p">:</span> <span class="s2">&quot;/home/arda/alg_data/&quot;</span><span class="p">}</span> <span class="n">test</span> <span class="o">=</span> <span class="n">Backtesting</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span> <span class="n">test</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span></code></pre> <section id="class-backtesting"> <h4><em>class</em> Backtesting</h4> </section> <section id="init-conf-kwargs"> <h4><span class="docutils literal">__init__ (conf, **kwargs)</span></h4> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 232)</p> <p>Non-consecutive header level increase; H3 to H5 [myst.header]</p> </aside> <section id="configuration-parameters"> <h5>Configuration parameters:</h5> <ul class="simple"> <li><p>&quot;alg&quot;: The algorithm as a <em><strong>class</strong></em>. Initialization will be done by the &quot;Backtesting&quot; class without any arguments.</p></li> <li><p>&quot;symbols&quot;: Symbols (Instruments) that should be tested. Any additional keys inside these dictionaries will be accessible within the class via <span class="docutils literal">self.config_data</span>. Therefore, instrument-specific parameters should be included in here.</p></li> <li><p>&quot;intervals&quot;: Candlestick intervals that will be needed for the strategy. These intervals will be automatically cached by the engine for quicker access.</p></li> <li><p>&quot;freq&quot;: Main interval of backtest.</p></li> <li><p>&quot;lookback&quot;: How much past should the backtest go</p></li> <li><p>&quot;delta&quot;: Skips the given amount of time before starting the test. It is useful when we need access to past candlesticks that normally won't be recorded within the test.</p></li> <li><p>&quot;balance&quot;: Grand balance</p></li> <li><p>&quot;source&quot;: market data source. &quot;binance&quot; for crypto, &quot;webull&quot; for securities</p></li> <li><p>&quot;name&quot; (optional). Market data that is pulled will be saved in the disk with the given name.</p></li> <li><p>&quot;fm&quot;: Path for the data to be saved.</p></li> </ul> </section> </section> <section id="run-steps-1"> <h4><span class="docutils literal">run(steps=1)</span></h4> <p>Starts the backtest.</p> <ul class="simple"> <li><p>steps: how many interval to jump over in each iteration. This comes handy when we need to speed up the test.</p></li> </ul> <p><em><strong>Note:</strong></em> steps=3 for the main interval: '5m' doesn't always mean &quot;every 15 minutes&quot;. This is because tradeless time frames are automatically ignored.</p> </section> </section> </section> <section id="go-live"> <h2>Go Live</h2> <section id="syntax-1"> <h3>Syntax</h3> <pre class="code python literal-block"><code><span class="kn">import</span> <span class="nn">stream</span> <span class="kn">from</span> <span class="nn">my_alg</span> <span class="kn">import</span> <span class="n">Alg</span> <span class="n">conf</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'alg'</span><span class="p">:</span> <span class="n">Alg</span><span class="p">,</span> <span class="s1">'freq'</span><span class="p">:</span> <span class="s1">'5m'</span><span class="p">,</span> <span class="s1">'balance'</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span> <span class="s1">'load'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'15m'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'1w'</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">'platform'</span><span class="p">:</span> <span class="s2">&quot;ibkr-paper&quot;</span><span class="p">,</span> <span class="s1">'symbols'</span><span class="p">:</span> <span class="p">[{</span><span class="s1">'symbol'</span><span class="p">:</span> <span class="s2">&quot;AAPL&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s1">'symbol'</span><span class="p">:</span> <span class="s2">&quot;NFLX&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s1">'symbol'</span><span class="p">}</span> <span class="s2">&quot;META&quot;</span><span class="p">}],</span> <span class="s1">'fm'</span><span class="p">:</span> <span class="s2">&quot;/home/arda/alg_data&quot;</span><span class="p">]</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span> <span class="n">stream</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">ip</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span></code></pre> <section id="class-trisigma-stream-stream"> <h4><em>class</em> trisigma.stream.Stream</h4> </section> <section id="init-conf-kwargs-1"> <h4><span class="docutils literal">__init__ (conf, **kwargs)</span></h4> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 272)</p> <p>Non-consecutive header level increase; H3 to H5 [myst.header]</p> </aside> <section id="configuration-parameters-1"> <h5>Configuration parameters:</h5> <ul class="simple"> <li><p>&quot;alg&quot;: The algorithm as a <em><strong>class</strong></em>. Initialization will be done by the &quot;Backtesting&quot; class without any arguments.</p></li> <li><p>&quot;symbols&quot;: Symbols (Instruments) that will be traded. Any additional keys inside these dictionaries will be accessible within the class via <span class="docutils literal">self.config_data</span>. Therefore, instrument-specific parameters should be included in here.</p></li> <li><p>&quot;intervals&quot;: Candlestick intervals that will be needed for the strategy. These intervals will be automatically cached by the engine for quicker access. Unlike the <span class="docutils literal">Backtesting</span> conf, intervels here are in the form of dictionaries. Each value represents how much candles to go back.</p></li> <li><p>&quot;freq&quot;: Main interval of stream.</p></li> <li><p>&quot;balance&quot;: Grand balance</p></li> <li><p>&quot;platform&quot;: Brokerage platform. options: &quot;binance&quot;, &quot;ibkr-paper&quot;, &quot;ibkr-real&quot;</p></li> <li><p>&quot;fm&quot;: Path for the data to be saved.</p></li> </ul> <p>(Any of these keys can also be passed through **kwargs)</p> </section> </section> <section id="connect-ip-none"> <h4><span class="docutils literal">connect (ip=None)</span></h4> <p>Starts the stream.</p> <ul class="simple"> <li><p>ip: client server address for &quot;ibkr-paper&quot; or &quot;ibkr-real&quot;. No need for &quot;binance&quot;</p></li> </ul> </section> </section> </section> <section id="strategy-optizer"> <h2>Strategy Optizer</h2> <section id="syntax-2"> <h3>Syntax</h3> <pre class="code python literal-block"><code><span class="kn">from</span> <span class="nn">trisigma</span> <span class="kn">import</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">trisigma.tuner</span> <span class="kn">import</span> <span class="n">Tuner</span> <span class="kn">import</span> <span class="nn">os</span> <span class="kn">import</span> <span class="nn">time</span> <span class="n">conf</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;talg_gen1&quot;</span><span class="p">,</span> <span class="s2">&quot;alg&quot;</span><span class="p">:</span> <span class="s2">&quot;talg_gen1.py&quot;</span><span class="p">,</span> <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;__data__&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;linktune3y&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;LINKUSDT&quot;</span><span class="p">]]],</span> <span class="s2">&quot;stop_loss&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">true</span><span class="p">,</span> <span class="n">false</span><span class="p">],</span> <span class="s2">&quot;wait15&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">true</span><span class="p">,</span> <span class="n">false</span><span class="p">],</span> <span class="s2">&quot;candles&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="p">},</span> <span class="p">}</span> <span class="n">tuner</span> <span class="o">=</span> <span class="n">Tuner</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="n">max_child</span><span class="o">=</span><span class="n">CHILD</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">OFFSET</span><span class="p">,</span> <span class="n">fm</span><span class="o">=</span><span class="s1">'/home/arda/alg_data'</span><span class="p">)</span> <span class="n">tuner</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span></code></pre> <section id="class-trisigma-tuner-tuner"> <h4><em>class</em> trisigma.tuner.Tuner</h4> </section> <section id="init-conf-kwargs-2"> <h4><span class="docutils literal">__init__ (conf, **kwargs)</span></h4> <aside class="system-message"> <p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">doc.md</span>, line 314)</p> <p>Non-consecutive header level increase; H3 to H5 [myst.header]</p> </aside> <section id="configuration-parameters-2"> <h5>Configuration parameters:</h5> <ul class="simple"> <li><p>&quot;alg&quot;: The algorithm as a <em><strong>module</strong></em>. this module will be run by the <em><strong>Tuner</strong></em>'s subprocessor with an additional argument: parameters.</p></li> <li><p>&quot;label&quot;: Name given to the tuning process.</p></li> <li><p>&quot;parameters&quot;: Inside, there should be the parameters to be optimized. Each value has to be a list containing the possible parameters. &quot;_ _ data _ _&quot; is a mandatory special parameter that indicates the desired market. This is the same label that is saved through <em><strong>Backtesting</strong></em>'s &quot;name&quot; key.</p></li> </ul> </section> </section> <section id="launch"> <h4><span class="docutils literal">launch ()</span></h4> <p>Starts the tuner.</p> <p><em><strong>Note</strong></em>: the <em><strong>Tuner</strong></em> does not expect or save any output. Saving must be handled within the algo.</p> </section> </section> </section> </main> </body> </html>
